<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title># Hash 맛보기 | cjlee38</title><meta name=keywords content="null"><meta name=description content="0. 들어가며 : Hash 라는 용어는 주로 암호학에서 많이 사용되지만,
개발자라면 오며가며 한 번쯤은 주워 듣는 용어이기도 하다.
특히, 블록체인을 한 번이라도 공부해봤다면,
Hash 라는 것이 이 블록체인의 핵심 기술 중 하나라는 것을 배웠을 것이다.
동작 원리를 안다고 해도 복호화(Decryption)가 불가능하므로,
암호학을 전공하지 않는 한 깊게 파고들 이유는 없다고 생각하지만,
그렇다고 아예 모르는 것은 개발자에겐 죄악에 가까우므로,
이번 포스팅을 통해 가볍게 혓바닥 한 번 대서 맛이라도 보자는 느낌으로 건드려보자.
1. Hash 에 대한 이론 1) What is Hash?"><meta name=author content="cjlee38"><link rel=canonical href=http://cjlee38.github.io/backup-copy/tech/btb/2020-09-25-what_is_hash/><link crossorigin=anonymous href=/assets/css/stylesheet.min.48a18943c2fc15c38a372b8dde1f5e5dc0bc64fa6cb90f5a817d2f8c76b7f3ae.css integrity="sha256-SKGJQ8L8FcOKNyuN3h9eXcC8ZPpsuQ9agX0vjHa3864=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=http://cjlee38.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://cjlee38.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://cjlee38.github.io/favicon-32x32.png><link rel=apple-touch-icon href=http://cjlee38.github.io/apple-touch-icon.png><link rel=mask-icon href=http://cjlee38.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="# Hash 맛보기"><meta property="og:description" content="0. 들어가며 : Hash 라는 용어는 주로 암호학에서 많이 사용되지만,
개발자라면 오며가며 한 번쯤은 주워 듣는 용어이기도 하다.
특히, 블록체인을 한 번이라도 공부해봤다면,
Hash 라는 것이 이 블록체인의 핵심 기술 중 하나라는 것을 배웠을 것이다.
동작 원리를 안다고 해도 복호화(Decryption)가 불가능하므로,
암호학을 전공하지 않는 한 깊게 파고들 이유는 없다고 생각하지만,
그렇다고 아예 모르는 것은 개발자에겐 죄악에 가까우므로,
이번 포스팅을 통해 가볍게 혓바닥 한 번 대서 맛이라도 보자는 느낌으로 건드려보자.
1. Hash 에 대한 이론 1) What is Hash?"><meta property="og:type" content="article"><meta property="og:url" content="http://cjlee38.github.io/backup-copy/tech/btb/2020-09-25-what_is_hash/"><meta property="article:section" content="backup copy"><meta property="article:published_time" content="2020-09-25T22:52:00+00:00"><meta property="article:modified_time" content="2020-09-25T22:52:00+00:00"><meta property="og:site_name" content="cjlee38"><meta name=twitter:card content="summary"><meta name=twitter:title content="# Hash 맛보기"><meta name=twitter:description content="0. 들어가며 : Hash 라는 용어는 주로 암호학에서 많이 사용되지만,
개발자라면 오며가며 한 번쯤은 주워 듣는 용어이기도 하다.
특히, 블록체인을 한 번이라도 공부해봤다면,
Hash 라는 것이 이 블록체인의 핵심 기술 중 하나라는 것을 배웠을 것이다.
동작 원리를 안다고 해도 복호화(Decryption)가 불가능하므로,
암호학을 전공하지 않는 한 깊게 파고들 이유는 없다고 생각하지만,
그렇다고 아예 모르는 것은 개발자에겐 죄악에 가까우므로,
이번 포스팅을 통해 가볍게 혓바닥 한 번 대서 맛이라도 보자는 느낌으로 건드려보자.
1. Hash 에 대한 이론 1) What is Hash?"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"# Hash 맛보기","item":"http://cjlee38.github.io/backup-copy/tech/btb/2020-09-25-what_is_hash/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"# Hash 맛보기","name":"# Hash 맛보기","description":"0. 들어가며 : Hash 라는 용어는 주로 암호학에서 많이 사용되지만,\n개발자라면 오며가며 한 번쯤은 주워 듣는 용어이기도 하다.\n특히, 블록체인을 한 번이라도 공부해봤다면,\nHash 라는 것이 이 블록체인의 핵심 기술 중 하나라는 것을 배웠을 것이다.\n동작 원리를 안다고 해도 복호화(Decryption)가 불가능하므로,\n암호학을 전공하지 않는 한 깊게 파고들 이유는 없다고 생각하지만,\n그렇다고 아예 모르는 것은 개발자에겐 죄악에 가까우므로,\n이번 포스팅을 통해 가볍게 혓바닥 한 번 대서 맛이라도 보자는 느낌으로 건드려보자.\n1. Hash 에 대한 이론 1) What is Hash?","keywords":["null"],"articleBody":"0. 들어가며 : Hash 라는 용어는 주로 암호학에서 많이 사용되지만,\n개발자라면 오며가며 한 번쯤은 주워 듣는 용어이기도 하다.\n특히, 블록체인을 한 번이라도 공부해봤다면,\nHash 라는 것이 이 블록체인의 핵심 기술 중 하나라는 것을 배웠을 것이다.\n동작 원리를 안다고 해도 복호화(Decryption)가 불가능하므로,\n암호학을 전공하지 않는 한 깊게 파고들 이유는 없다고 생각하지만,\n그렇다고 아예 모르는 것은 개발자에겐 죄악에 가까우므로,\n이번 포스팅을 통해 가볍게 혓바닥 한 번 대서 맛이라도 보자는 느낌으로 건드려보자.\n1. Hash 에 대한 이론 1) What is Hash? : Hash란, Hash 함수를 이용하여, “어떤 값을 넣더라도” 고정된 길이의 문자열로 바꿔버리는 것을 의미한다.\nWikipedia에서 설명하는 Hash 함수는 다음과 같이 설명하고 있다.\n  A hash function is any function that can be used to map data of arbitrary size to fixed-size values.\n  즉, 임의의 크기의 데이터가 고정된 크기의 값으로 mapping 시켜버리는 함수를 의미한다.\n극단적으로 쉬운 Hash function은, 짝홀수를 만드는 함수다.\n다음을 보자.\npublic int myHash(int value) {  int hashValue;  if (value % 2 == 0) {  hashValue = 0;  } else {  hashvalue = 1;  }  return hashValue; } 사실, 한 줄로도 작성할 수 있는 코드지만, 일부러 위와 같이 작성했다.\n각설하고, 위와 같은 코드가 하는 일은,\n입력된 숫자가 짝수면 0을, 홀수면 1을 return하는 것이다.이 myHash() 라는 hash 함수에,\n1을 집어넣든, 1억을 집어넣든, 1조를 집어넣든,\n결국 0 혹은 1의 고정된 값이 나온다.\n고정된 길이의 값을 출력하므로, 이 함수는 일단은 Hash 함수라고 이야기 할 수 있다.\n2) Hash 함수의 특징 : 이러한 Hash 함수는, 다음과 같은 특성을 가진다.\n 어떠한 값을 입력하더라도, **“고정된 길이”**의 값을 출력한다. 입력값이 조금이라도 바뀌면, 출력값은 달라진다. 복호화가 불가능하다.  여기서 핵심이라고 볼 수 있는 부분은 2번인데,\n주로 암호화 Hash의 경우, Hash 값만 같으면 본래의 값도\n동일하다고 취급하는 것이 주 목적이기 때문에,\n최대한 Hash 충돌이 일어나지 않도록 해야 한다.\n일례로, 강의를 들었을 때 교수님께서 재미난 비유를 하나 해주셨는데,\n책이 100만 권이 있는 도서관에서, 책의 내용이 단 한 글자라도\n바뀌었는지 알기 위해서는, 모든 책을 다 조사할 필요 없이\n책들의 내용을 Hash 값으로 보관해서 그것만 들고 있기만 한다면 된다는 이야기를 하셨다.\n물론, 바뀌었을 때 “어디가 바뀌었는지?” 에 대해서는 절대 알 수 없다.\n3) Hash 함수의 성질 : 또한, Hash 함수는 다음을 만족해야 한다.\n(정확히는, Cryptographic Hash. 즉 암호화 Hash는 다음을 만족해야 한다.)\n　1. 원상 회피(Pre-image resistance)\n 주어진 해시 값 h에 대해, 다음을 만족하는 메시지 m을 찾는 것은 불가능하다.  $$h = H(m)$$\n　2. 두 번째 원상 회피(Pre-image resistance)\n 주어진 메시지 m에 대해, 다음을 만족하는 또 다른 메시지 m’을 찾는 것은 불가능하다.  $$m \\neq m’ 이면서 H(m) = H(m’)$$\n　3. 충돌 회피(Collision resistance)\n 다음을 만족하는 두 메시지 m과 m’를 찾는 것은 불가능하다.  $$m \\neq m’ 이면서 H(m) = H(m’)$$\n말이 좀 어려우므로, 바꿔서 설명하면 다음과 같다\n Hash의 결과값을 보고, 본래의 값을 찾는 것은 어렵다. 입력값을 보고, 이 입력과 같은 해쉬값을 출력하는 다른 입력값을 찾는 것이 어렵다. Hash의 결과값이 같은 두 입력값을 찾는 것이 어려워야 한다. 즉, Hash 충돌에 안전해야 한다.  이 세 가지를 만족시켜야, 비로소 “진정한” 암호화 Hash 함수라고 일컬을 수 있다.\n아까 작성했던 짝홀수로 만든 Hash 함수를 보자.\n우리는 0 혹은 1이라는 값을 보고, 본래의 값이 무엇이었는지 알 수 없다. 따라서, 원상회피의 조건을 만족한다.\n두 번째로, 우리가 3이라는 값이 주어졌을 때, 5라는 값으로 바꿔 넣으면\n같은 Hash 값인 1이 출력된다는 것을 쉽게 알 수 있다.\n따라서, 짝홀수 Hash 함수는 두 번째 원상회피를 만족하지 못한다고 볼 수 있다.\n마찬가지로, 0 혹은 1이라는 결과값을 내뱉는 본래의 값은 1,3,5… 임을 쉽게 알 수 있다.\n이는 충돌회피 또한 만족하지 못한다고 볼 수 있다.\n4) Hash 충돌 : 위 짝홀수 Hash 함수가 가장 대표적인 Hash 충돌의 예시가 된다.\n세상 모든 정수는 짝홀수로 구분할 수 있고, 따라서 Hash 값은 무조건 0 혹은 1이 된다.\n1과 3은 1이라는 같은 값을 출력하므로 충돌이고,\n1과 5 또한 1이라는 같은 값을 출력하므로 충돌이다.\n암호화 Hash 에서는 이 충돌을 막기 위해 다양하고 복잡한 방법을 사용한다.\n2. Hash에 기반한 공격과 수비 1) SHA-256 : 위 Hash 함수의 성질을 지키기 위해, 여러 Hash 알고리즘들이 고안되었다.\n당장, 해쉬 생성기 사이트로 이동해서,\n아무런 값이나 입력해보면\nF03B8A4D721D828D8C972CC84C023EA67022CE5D0F8E650FB59D22E4B187DA6E\n이러한 알 수 없는 숫자가 튀어나오는 것을 볼 수 있다.\n지금 예시로 보여준 Hash 값은 SHA-256의 결과인데, 이름처럼\n256 bit(64글자 * 16진수(4 bit)) 로 생성된 결과임을 알 수 있다.\n단순히 생각해보더라도, 256 bit 라면, 2256 이고,\n이는 지수표기법으로는\n1.1579208923731619542357098500869e+77\n이라는 말도안되게 거대한 숫자가 나온다.\n즉, 단순하게 생각하면 위 숫자의 개수만큼 데이터를 집어넣지 않는 이상, 충돌이 나지 않는다는 이야기다.\n(물론 비둘기집의 원리를 고려하면, 실제로는 그렇지 않겠지만)\n  여담으로, Firefox를 이용해서 학교 홈페이지에 로그인 해보니, Firefox의 비밀번호를 저장하겠냐는 질문과 함께 원본 데이터를 볼 수 있었다.\n숫자가 뭔가 낯이 익다 싶어서 보니 16진수인 것을 확인할 수 있었고,\n위 Hash 생성기에 내 비밀번호를 SHA-512에 넣어보니 같은 값임을 확인할 수 있었다.\n이 때, 정말 신기하면서도 “Hash … 라서 괜찮겠지?” 하고 넘겼던 기억이 난다.\n  2) Rainbow Table : 결국, 이 Hash 함수는 복호화가 불가능하므로,\n있는대로 때려 맞춰보는 brute force 가 Hash 를 뚫는 기본적인 방법이 되시겠다.\n어떤 해커가, 철수라는 사람의 비밀번호의 Hash 값을 알아냈는데,\n이 원본 값을 찾기 위해 가능한 모든 입력값들을 다 때려박아서 비밀번호를 찾아냈다.\n그렇다면, 이 철수라는 사람과 같은 Hash 값을 갖고 있는\n다른 모~든 사람들의 원본 값도 다 똑같은 값일 것임은 자명하다.\n그렇다면, 모든 입력값과 모든 Hash 값을 다 저장해놓는다면 어떨까?\nHash 함수가 취약하다면, 어지간한 Hash의 원본 값은 다 찾을 수 있을 것이다.\n그리고, 매 번 찾을 필요가 없이, 그냥 새로운 해킹 대상이 들어올 때마다\n미리 저장해놓은 곳에서 Hash 값을 보고 원본 값을 찾아내서 입력하기만 하면 된다.\n이렇게 저장해놓은 Table을 Rainbow Table이라 한다.\n(실제로는 이보다 좀 더 복잡한 방식으로 저장한다고 한다.)\n3) Salting : Salting. 말 그대로 소금을 치는 것이다.\nRainbow Table에 맞서 나온 대응책이다.\n원리는 간단하다.\n만약 김철수가 “hello” 라는 값을 비밀번호로 저장하려고 했다면,\n거기에 “Kim” 이라는 값을 추가해서 Hash 함수를 적용한다.\n다음으로, 홍길동이 똑같이 “hello” 라는 값을 비밀번호로 저장하려고 했다면,\n거기에 “Hong” 이라는 값을 추가해서 Hash 함수를 적용한다.\n즉, “Kim” 혹은 “Hong” 이라는 소금을 치는 것이다.\n이렇게 하면, 같은 비밀번호를 사용하더라도 다른 Hash 값이 저장되고,\n“값이 조금이라도 달라지면 출력값은 완전히 달라지므로” Rainbow Table에 대응할 수 있게 된다.\n3. 마치며 : Hash에 대한 개념은, 암호학, 컴퓨터공학을 넘어서 IT에 발가락 하나라도 담그고 있는 사람이라면 반드시 알아야 하는 개념이라고 생각한다.\n나중에 정말 여유가 되면, 교수님께 배웠던 블록체인 시리즈도 꼭 다뤄보고 싶다.\nReference  한국외대 이병욱 교수님, 정보보안 강의교안. Hash function  ","wordCount":"979","inLanguage":"en","datePublished":"2020-09-25T22:52:00Z","dateModified":"2020-09-25T22:52:00Z","author":{"@type":"Person","name":"cjlee38"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://cjlee38.github.io/backup-copy/tech/btb/2020-09-25-what_is_hash/"},"publisher":{"@type":"Organization","name":"cjlee38","logo":{"@type":"ImageObject","url":"http://cjlee38.github.io/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://cjlee38.github.io/ accesskey=h title="Home (Alt + H)"><img src=http://cjlee38.github.io/assets/icon.jpeg alt=logo aria-label=logo height=35>Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=http://cjlee38.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=http://cjlee38.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://cjlee38.github.io/>Home</a></div><h1 class=post-title># Hash 맛보기</h1><div class=post-meta><span title="2020-09-25 22:52:00 +0000 UTC">September 25, 2020</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;cjlee38&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/backup%20copy/Tech/BTB/2020-09-25-what_is_hash.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#0-%eb%93%a4%ec%96%b4%ea%b0%80%eb%a9%b0 aria-label="0. 들어가며">0. 들어가며</a></li><li><a href=#1-hash-%ec%97%90-%eb%8c%80%ed%95%9c-%ec%9d%b4%eb%a1%a0 aria-label="1. Hash 에 대한 이론">1. Hash 에 대한 이론</a><ul><li><a href=#1-what-is-hash aria-label="1) What is Hash?">1) What is Hash?</a></li><li><a href=#2-hash-%ed%95%a8%ec%88%98%ec%9d%98-%ed%8a%b9%ec%a7%95 aria-label="2) Hash 함수의 특징">2) Hash 함수의 특징</a></li><li><a href=#3-hash-%ed%95%a8%ec%88%98%ec%9d%98-%ec%84%b1%ec%a7%88 aria-label="3) Hash 함수의 성질">3) Hash 함수의 성질</a></li><li><a href=#4-hash-%ec%b6%a9%eb%8f%8c aria-label="4) Hash 충돌">4) Hash 충돌</a></li></ul></li><li><a href=#2-hash%ec%97%90-%ea%b8%b0%eb%b0%98%ed%95%9c-%ea%b3%b5%ea%b2%a9%ea%b3%bc-%ec%88%98%eb%b9%84 aria-label="2. Hash에 기반한 공격과 수비">2. Hash에 기반한 공격과 수비</a><ul><li><a href=#1-sha-256 aria-label="1) SHA-256">1) SHA-256</a></li><li><a href=#2-rainbow-table aria-label="2) Rainbow Table">2) Rainbow Table</a></li><li><a href=#3-salting aria-label="3) Salting">3) Salting</a></li></ul></li><li><a href=#3-%eb%a7%88%ec%b9%98%eb%a9%b0 aria-label="3. 마치며">3. 마치며</a></li><li><a href=#reference aria-label=Reference>Reference</a></li></ul></div></details></div><div class=post-content><h1 id=0-들어가며>0. 들어가며<a hidden class=anchor aria-hidden=true href=#0-들어가며>#</a></h1><p>: Hash 라는 용어는 주로 암호학에서 많이 사용되지만,<br>개발자라면 오며가며 한 번쯤은 주워 듣는 용어이기도 하다.</p><p>특히, 블록체인을 한 번이라도 공부해봤다면,<br>Hash 라는 것이 이 블록체인의 핵심 기술 중 하나라는 것을 배웠을 것이다.</p><p>동작 원리를 안다고 해도 복호화(Decryption)가 불가능하므로,<br>암호학을 전공하지 않는 한 깊게 파고들 이유는 없다고 생각하지만,</p><p>그렇다고 아예 모르는 것은 개발자에겐 죄악에 가까우므로,<br>이번 포스팅을 통해 가볍게 <del>혓바닥 한 번 대서 맛이라도 보자는 느낌으로</del> 건드려보자.</p><h1 id=1-hash-에-대한-이론>1. Hash 에 대한 이론<a hidden class=anchor aria-hidden=true href=#1-hash-에-대한-이론>#</a></h1><h2 id=1-what-is-hash>1) What is Hash?<a hidden class=anchor aria-hidden=true href=#1-what-is-hash>#</a></h2><p>: Hash란, Hash 함수를 이용하여, &ldquo;어떤 값을 넣더라도&rdquo; 고정된 길이의 문자열로 바꿔버리는 것을 의미한다.</p><p>Wikipedia에서 설명하는 Hash 함수는 다음과 같이 설명하고 있다.</p><hr><blockquote><p>A hash function is any function that can be used to map data of arbitrary size to fixed-size values.</p></blockquote><hr><p>즉, 임의의 크기의 데이터가 고정된 크기의 값으로 mapping 시켜버리는 함수를 의미한다.</p><p>극단적으로 쉬운 Hash function은, 짝홀수를 만드는 함수다.</p><p>다음을 보자.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>myHash</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> value<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> hashValue<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>value <span style=color:#f92672>%</span> 2 <span style=color:#f92672>==</span> 0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        hashValue <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        hashvalue <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> hashValue<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>사실, 한 줄로도 작성할 수 있는 코드지만, 일부러 위와 같이 작성했다.<br>각설하고, 위와 같은 코드가 하는 일은,<br>입력된 숫자가 짝수면 0을, 홀수면 1을 return하는 것이다.</p><p>이 myHash() 라는 hash 함수에,<br>1을 집어넣든, 1억을 집어넣든, 1조를 집어넣든,<br>결국 0 혹은 1의 <strong>고정된 값</strong>이 나온다.</p><p>고정된 길이의 값을 출력하므로, 이 함수는 <em>일단은</em> Hash 함수라고 이야기 할 수 있다.</p><h2 id=2-hash-함수의-특징>2) Hash 함수의 특징<a hidden class=anchor aria-hidden=true href=#2-hash-함수의-특징>#</a></h2><p>: 이러한 Hash 함수는, 다음과 같은 특성을 가진다.</p><ol><li>어떠한 값을 입력하더라도, **&ldquo;고정된 길이&rdquo;**의 값을 출력한다.</li><li>입력값이 조금이라도 바뀌면, 출력값은 달라진다.</li><li>복호화가 불가능하다.</li></ol><p>여기서 핵심이라고 볼 수 있는 부분은 2번인데,<br>주로 암호화 Hash의 경우, Hash 값만 같으면 본래의 값도<br>동일하다고 취급하는 것이 주 목적이기 때문에,<br><strong>최대한 Hash 충돌이 일어나지 않도록</strong> 해야 한다.</p><p>일례로, 강의를 들었을 때 교수님께서 재미난 비유를 하나 해주셨는데,<br>책이 100만 권이 있는 도서관에서, 책의 내용이 단 한 글자라도<br>바뀌었는지 알기 위해서는, 모든 책을 다 조사할 필요 없이<br><strong>책들의 내용을 Hash 값으로 보관</strong>해서 그것만 들고 있기만 한다면 된다는 이야기를 하셨다.</p><p>물론, 바뀌었을 때 <strong>&ldquo;어디가 바뀌었는지?&rdquo;</strong> 에 대해서는 절대 알 수 없다.</p><h2 id=3-hash-함수의-성질>3) Hash 함수의 성질<a hidden class=anchor aria-hidden=true href=#3-hash-함수의-성질>#</a></h2><p>: 또한, Hash 함수는 다음을 만족해야 한다.<br>(정확히는, Cryptographic Hash. 즉 암호화 Hash는 다음을 만족해야 한다.)</p><p>　1. 원상 회피(Pre-image resistance)</p><ul><li>주어진 해시 값 h에 대해, 다음을 만족하는 메시지 m을 찾는 것은 불가능하다.</li></ul><p>$$h = H(m)$$</p><p>　2. 두 번째 원상 회피(Pre-image resistance)</p><ul><li>주어진 메시지 m에 대해, 다음을 만족하는 또 다른 메시지 m&rsquo;을 찾는 것은 불가능하다.</li></ul><p>$$m \neq m&rsquo; 이면서 H(m) = H(m&rsquo;)$$</p><p>　3. 충돌 회피(Collision resistance)</p><ul><li>다음을 만족하는 두 메시지 m과 m&rsquo;를 찾는 것은 불가능하다.</li></ul><p>$$m \neq m&rsquo; 이면서 H(m) = H(m&rsquo;)$$</p><p>말이 좀 어려우므로, 바꿔서 설명하면 다음과 같다</p><ol><li>Hash의 결과값을 보고, 본래의 값을 찾는 것은 어렵다.</li><li>입력값을 보고, 이 입력과 같은 해쉬값을 출력하는 다른 입력값을 찾는 것이 어렵다.</li><li>Hash의 결과값이 같은 두 입력값을 찾는 것이 어려워야 한다. 즉, <strong>Hash 충돌</strong>에 안전해야 한다.</li></ol><p>이 세 가지를 만족시켜야, 비로소 <strong>&ldquo;진정한&rdquo;</strong> 암호화 Hash 함수라고 일컬을 수 있다.</p><p>아까 작성했던 짝홀수로 만든 Hash 함수를 보자.</p><p>우리는 0 혹은 1이라는 값을 보고, 본래의 값이 무엇이었는지 알 수 없다. 따라서, 원상회피의 조건을 만족한다.</p><p>두 번째로, 우리가 3이라는 값이 주어졌을 때, 5라는 값으로 바꿔 넣으면<br>같은 Hash 값인 1이 출력된다는 것을 <strong>쉽게</strong> 알 수 있다.<br>따라서, 짝홀수 Hash 함수는 두 번째 원상회피를 만족하지 못한다고 볼 수 있다.</p><p>마찬가지로, 0 혹은 1이라는 결과값을 내뱉는 본래의 값은 1,3,5&mldr; 임을 <strong>쉽게</strong> 알 수 있다.<br>이는 충돌회피 또한 만족하지 못한다고 볼 수 있다.</p><h2 id=4-hash-충돌>4) Hash 충돌<a hidden class=anchor aria-hidden=true href=#4-hash-충돌>#</a></h2><p>: 위 짝홀수 Hash 함수가 가장 대표적인 Hash 충돌의 예시가 된다.<br>세상 모든 정수는 짝홀수로 구분할 수 있고, 따라서 Hash 값은 무조건 0 혹은 1이 된다.</p><p>1과 3은 1이라는 같은 값을 출력하므로 충돌이고,<br>1과 5 또한 1이라는 같은 값을 출력하므로 충돌이다.</p><p>암호화 Hash 에서는 이 충돌을 막기 위해 다양하고 복잡한 방법을 사용한다.</p><h1 id=2-hash에-기반한-공격과-수비>2. Hash에 기반한 공격과 수비<a hidden class=anchor aria-hidden=true href=#2-hash에-기반한-공격과-수비>#</a></h1><h2 id=1-sha-256>1) SHA-256<a hidden class=anchor aria-hidden=true href=#1-sha-256>#</a></h2><p>: 위 Hash 함수의 성질을 지키기 위해, 여러 Hash 알고리즘들이 고안되었다.</p><p>당장, <a href=https://www.convertstring.com/ko/Hash/SHA256>해쉬 생성기</a> 사이트로 이동해서,<br>아무런 값이나 입력해보면<br><strong>F03B8A4D721D828D8C972CC84C023EA67022CE5D0F8E650FB59D22E4B187DA6E</strong><br>이러한 알 수 없는 숫자가 튀어나오는 것을 볼 수 있다.</p><p>지금 예시로 보여준 Hash 값은 SHA-256의 결과인데, 이름처럼<br>256 bit(64글자 * 16진수(4 bit)) 로 생성된 결과임을 알 수 있다.</p><p>단순히 생각해보더라도, 256 bit 라면, <strong>2256</strong> 이고,<br>이는 지수표기법으로는<br><strong>1.1579208923731619542357098500869e+77</strong><br>이라는 말도안되게 거대한 숫자가 나온다.</p><p>즉, 단순하게 생각하면 위 숫자의 개수만큼 데이터를 집어넣지 않는 이상, 충돌이 나지 않는다는 이야기다.<br>(물론 비둘기집의 원리를 고려하면, 실제로는 그렇지 않겠지만)</p><hr><blockquote><p>여담으로, Firefox를 이용해서 학교 홈페이지에 로그인 해보니, Firefox의 비밀번호를 저장하겠냐는 질문과 함께 원본 데이터를 볼 수 있었다.<br>숫자가 뭔가 낯이 익다 싶어서 보니 16진수인 것을 확인할 수 있었고,<br>위 Hash 생성기에 내 비밀번호를 SHA-512에 넣어보니 같은 값임을 확인할 수 있었다.</p><p>이 때, 정말 신기하면서도 &ldquo;Hash &mldr; 라서 괜찮겠지?&rdquo; 하고 넘겼던 기억이 난다.</p></blockquote><hr><h2 id=2-rainbow-table>2) Rainbow Table<a hidden class=anchor aria-hidden=true href=#2-rainbow-table>#</a></h2><p>: 결국, 이 Hash 함수는 복호화가 불가능하므로,<br>있는대로 때려 맞춰보는 <strong>brute force</strong> 가 Hash 를 뚫는 기본적인 방법이 되시겠다.</p><p>어떤 해커가, 철수라는 사람의 비밀번호의 Hash 값을 알아냈는데,<br>이 원본 값을 찾기 위해 가능한 모든 입력값들을 다 때려박아서 비밀번호를 찾아냈다.</p><p>그렇다면, 이 철수라는 사람과 같은 Hash 값을 갖고 있는<br>다른 모~든 사람들의 원본 값도 다 똑같은 값일 것임은 자명하다.<br>그렇다면, <strong>모든 입력값과 모든 Hash 값을 다 저장</strong>해놓는다면 어떨까?</p><p>Hash 함수가 취약하다면, 어지간한 Hash의 원본 값은 다 찾을 수 있을 것이다.<br>그리고, 매 번 찾을 필요가 없이, 그냥 새로운 해킹 대상이 들어올 때마다<br><strong>미리 저장해놓은 곳</strong>에서 Hash 값을 보고 원본 값을 찾아내서 입력하기만 하면 된다.</p><p><strong>이렇게 저장해놓은 Table을 Rainbow Table</strong>이라 한다.<br>(실제로는 이보다 좀 더 복잡한 방식으로 저장한다고 한다.)</p><h2 id=3-salting>3) Salting<a hidden class=anchor aria-hidden=true href=#3-salting>#</a></h2><p>: Salting. 말 그대로 소금을 치는 것이다.<br>Rainbow Table에 맞서 나온 대응책이다.</p><p>원리는 간단하다.</p><p>만약 김철수가 &ldquo;hello&rdquo; 라는 값을 비밀번호로 저장하려고 했다면,<br>거기에 &ldquo;Kim&rdquo; 이라는 값을 추가해서 Hash 함수를 적용한다.</p><p>다음으로, 홍길동이 똑같이 &ldquo;hello&rdquo; 라는 값을 비밀번호로 저장하려고 했다면,<br>거기에 &ldquo;Hong&rdquo; 이라는 값을 추가해서 Hash 함수를 적용한다.</p><p>즉, &ldquo;Kim&rdquo; 혹은 &ldquo;Hong&rdquo; 이라는 소금을 치는 것이다.</p><p>이렇게 하면, 같은 비밀번호를 사용하더라도 다른 Hash 값이 저장되고,<br><strong>&ldquo;값이 조금이라도 달라지면 출력값은 완전히 달라지므로&rdquo;</strong> Rainbow Table에 대응할 수 있게 된다.</p><h1 id=3-마치며>3. 마치며<a hidden class=anchor aria-hidden=true href=#3-마치며>#</a></h1><p>: Hash에 대한 개념은, 암호학, 컴퓨터공학을 넘어서 IT에 발가락 하나라도 담그고 있는 사람이라면 반드시 알아야 하는 개념이라고 생각한다.</p><p>나중에 정말 여유가 되면, 교수님께 배웠던 블록체인 시리즈도 꼭 다뤄보고 싶다.</p><h1 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h1><ul><li>한국외대 이병욱 교수님, 정보보안 강의교안.</li><li><a href=https://en.wikipedia.org/wiki/Hash_function>Hash function</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://cjlee38.github.io/tags/null/>null</a></li></ul><nav class=paginav><a class=prev href=http://cjlee38.github.io/backup-copy/tech/btb/2020-09-27-tdd-by-jaesung_park/><span class=title>« Prev Page</span><br><span># 박재성 - 의식적인 연습으로 TDD, 리팩토링 연습하기</span></a>
<a class=next href=http://cjlee38.github.io/backup-copy/tech/jsp/2020-09-25-jsp_learning_06/><span class=title>Next Page »</span><br><span># 6. JSP 학습기록 - doGet, doPost와 JSP, 그리고 EL(Expression Language)</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share # Hash 맛보기 on twitter" href="https://twitter.com/intent/tweet/?text=%23%20Hash%20%eb%a7%9b%eb%b3%b4%ea%b8%b0&url=http%3a%2f%2fcjlee38.github.io%2fbackup-copy%2ftech%2fbtb%2f2020-09-25-what_is_hash%2f&hashtags=null"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share # Hash 맛보기 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fcjlee38.github.io%2fbackup-copy%2ftech%2fbtb%2f2020-09-25-what_is_hash%2f&title=%23%20Hash%20%eb%a7%9b%eb%b3%b4%ea%b8%b0&summary=%23%20Hash%20%eb%a7%9b%eb%b3%b4%ea%b8%b0&source=http%3a%2f%2fcjlee38.github.io%2fbackup-copy%2ftech%2fbtb%2f2020-09-25-what_is_hash%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share # Hash 맛보기 on reddit" href="https://reddit.com/submit?url=http%3a%2f%2fcjlee38.github.io%2fbackup-copy%2ftech%2fbtb%2f2020-09-25-what_is_hash%2f&title=%23%20Hash%20%eb%a7%9b%eb%b3%b4%ea%b8%b0"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share # Hash 맛보기 on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2fcjlee38.github.io%2fbackup-copy%2ftech%2fbtb%2f2020-09-25-what_is_hash%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share # Hash 맛보기 on whatsapp" href="https://api.whatsapp.com/send?text=%23%20Hash%20%eb%a7%9b%eb%b3%b4%ea%b8%b0%20-%20http%3a%2f%2fcjlee38.github.io%2fbackup-copy%2ftech%2fbtb%2f2020-09-25-what_is_hash%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share # Hash 맛보기 on telegram" href="https://telegram.me/share/url?text=%23%20Hash%20%eb%a7%9b%eb%b3%b4%ea%b8%b0&url=http%3a%2f%2fcjlee38.github.io%2fbackup-copy%2ftech%2fbtb%2f2020-09-25-what_is_hash%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=http://cjlee38.github.io/>cjlee38</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>